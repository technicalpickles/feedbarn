#!/usr/bin/env ruby

$:.unshift File.dirname(__FILE__) + '/../lib'

require 'feedbarn'

farmer = FeedBarn::Farmer.new
feeds = farmer.gather
barn = FeedBarn::Barn.new('My barn', feeds)
view = FeedBarn::View.new(barn)

Dir.mkdir('output') unless File.exists?('output')
open('output/index.html', 'w') do |file|
  file.write view.render
  file.close
end